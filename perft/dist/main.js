(()=>{"use strict";var e,t,N,a,s,i={392:(e,t,N)=>{N.d(t,{Z:()=>Qe});var a=N(824),s=N(7),i=N(165);const I=({rank:e,file:t})=>e>=0&&e<8&&t>=0&&t<8,o=(e,t=1)=>({rank:e.rank+t,file:e.file}),r=(e,t=1)=>({rank:e.rank-t,file:e.file}),K=(e,t=1)=>({rank:e.rank,file:e.file-t}),O=(e,t=1)=>({rank:e.rank,file:e.file+t}),n=(e,t=1)=>o(K(e,t),t),c=(e,t=1)=>o(O(e,t),t),P=(e,t=1)=>r(K(e,t),t),l=(e,t=1)=>r(O(e,t),t),E={[s.TW.UpLeft]:n,[s.TW.UpRight]:c,[s.TW.DownLeft]:P,[s.TW.DownRight]:l,[s.TW.Up]:o,[s.TW.Right]:O,[s.TW.Left]:K,[s.TW.Down]:r},G=e=>[o(K(e),2),o(O(e),2),K(o(e),2),K(r(e),2),r(K(e),2),r(O(e),2),O(o(e),2),O(r(e),2)].filter((e=>I(e))).map((e=>(0,i.Z4)(e))),H=(e,t)=>((e,t)=>{const N=[];for(const a of function*(e,t){for(;I(e);)yield e,e=t(e)}(t(e),t))N.push(a);return N})(e,t).map((e=>(0,i.Z4)(e))),u=e=>[n,c,P,l].map((t=>H(e,t))),p=e=>[o,O,K,r].map((t=>H(e,t))),A=e=>[s.TW.UpLeft,s.TW.UpRight,s.TW.DownLeft,s.TW.DownRight].reduce(((t,N)=>(t[N]=H(e,E[N]),t)),{}),W=e=>[s.TW.Up,s.TW.Right,s.TW.Left,s.TW.Down].reduce(((t,N)=>(t[N]=H(e,E[N]),t)),{}),S=[],h=[],B=[],R=[],T=[],Q=[],f=[],U=[],k=[],g=[];for(const{rank:e,file:t}of(0,i.Qg)()){const N=(0,i.Z4)({rank:e,file:t});S[N]=u({rank:e,file:t}),B[N]=[o(d={rank:e,file:t}),K(d),O(d),r(d),n(d),c(d),P(d),l(d)].filter((e=>I(e))).map((e=>(0,i.Z4)(e))),h[N]=G({rank:e,file:t}),R[N]=p({rank:e,file:t}),T[N]=[...u({rank:e,file:t}),...p({rank:e,file:t})],Q[N]=A({rank:e,file:t}),f[N]=W({rank:e,file:t}),U[N]={...A({rank:e,file:t}),...W({rank:e,file:t})},k[N]=[...S[N].map((e=>({type:s.WA.Bishop,ray:e}))),...R[N].map((e=>({type:s.WA.Rook,ray:e})))],g[N]=[...S[N].flat(),...R[N].flat(),...h[N],...B[N]]}var d;const q=S.map((e=>e.flat())),y=R.map((e=>e.flat())),v=T.map((e=>e.flat())),m=q.map((e=>{const t=Array(64);return e.forEach((e=>t[e]=!0)),t})),b=y.map((e=>{const t=Array(64);return e.forEach((e=>t[e]=!0)),t})),_=v.map((e=>{const t=Array(64);return e.forEach((e=>t[e]=!0)),t})),w=(g.map((e=>{const t=Array(64);return e.forEach((e=>t[e]=!0)),t})),{[s.WA.Bishop]:Q,[s.WA.Rook]:f,[s.WA.Queen]:U}),C=(e,t=1)=>e+8*t,M=(e,t=1)=>e-8*t,L=(e,t=1)=>e-1*t,$=(e,t=1)=>e+1*t,z=(e,t,N,{skip:a=[]})=>{const s=[],i=t.square;let I;for(const o of N){if(a.includes(o)){s.push({from:i,to:o,piece:t.piece});continue}const N=e.get(o);if(N){if(N.color===t.piece.color)break;I={attacked:{square:o,type:N.type},attacker:{square:i,type:t.piece.type},slideSquares:s.map((({to:e})=>e))},s.push({from:i,to:o,piece:t.piece,attack:I});break}s.push({from:i,to:o,piece:t.piece})}return s},D=(e,t,N,a,s)=>{const i=[],I=[],o=t.square;let r=!!a;for(const K of N)if(r){if(I.push(K),K===a)r=!1;else if(e.get(K))break}else{if(i.push({attacker:{square:o,type:t.piece.type},square:K,slideSquares:[...I]}),I.push(K),K===s)break;if(e.get(K))break}return i},F=(e,t,N)=>S[N].flatMap((a=>D(e,{square:N,piece:{color:t,type:s.WA.Bishop}},a))),x=(e,t,N)=>R[N].flatMap((a=>D(e,{square:N,piece:{color:t,type:s.WA.Rook}},a))),j=(e,t,N)=>{switch(e.type){case s.WA.Bishop:return F(t,e.color,N);case s.WA.King:return(e=>B[e].map((t=>({attacker:{square:e,type:s.WA.King},square:t,slideSquares:[]}))))(N);case s.WA.Knight:return(e=>h[e].map((t=>({attacker:{square:e,type:s.WA.Knight},square:t,slideSquares:[]}))))(N);case s.WA.Pawn:return((e,t)=>{const N=[],a=e===s.Il.White?C:M,i=a(L(t)),I=a($(t));return i%8!=7&&N.push({attacker:{square:t,type:s.WA.Pawn},square:i,slideSquares:[]}),I%8!=0&&N.push({attacker:{square:t,type:s.WA.Pawn},square:I,slideSquares:[]}),N})(e.color,N);case s.WA.Queen:return((e,t,N)=>[...F(e,t,N),...x(e,t,N)])(t,e.color,N);case s.WA.Rook:return x(t,e.color,N)}};var Z;!function(e){e[e.FullRemove=0]="FullRemove",e[e.PartialRemove=1]="PartialRemove",e[e.PartialAdd=2]="PartialAdd"}(Z||(Z={}));class Y{constructor(e,t){this._countMap=new Map,this._squareControlByPiece=new Map,this._updatesStack=[];for(const[N,a]of e.pieces){if(a.color!==t)continue;const s=j(a,e.pieces,N);this.addAttacksForPiece(N,s)}}isAttacked(e){return(this._countMap.get(e)??0)>0}controlForPiece(e){return this._squareControlByPiece.get(e)??[]}attackEntries(){return this._countMap.entries()}startChangeset(){this._updatesStack.push([])}undoChangeset(){const e=this._updatesStack.pop()??[];for(const t of e)switch(t.type){case Z.FullRemove:this.removeAttacksForPiece(t.square,!1),this.addAttacksForPiece(t.square,t.squares);break;case Z.PartialRemove:this.addAttacks(t.square,t.squares,!1);break;case Z.PartialAdd:this.removeAttacks(t.square,t.squares,!1)}}addAttacksForPiece(e,t){for(const e of t)this._countMap.set(e.square,(this._countMap.get(e.square)??0)+1);this._squareControlByPiece.set(e,t)}addAttacks(e,t,N=!0){N&&this._updatesStack[this._updatesStack.length-1].push({type:Z.PartialAdd,square:e,squares:t});for(const e of t)this._countMap.set(e.square,(this._countMap.get(e.square)??0)+1);const a=this._squareControlByPiece.get(e);if(!a)throw Error("there should be square control from this square");a.push(...t)}removeAttacksForPiece(e,t=!0){const N=this._squareControlByPiece.get(e)??[];t&&this._updatesStack[this._updatesStack.length-1].push({type:Z.FullRemove,square:e,squares:N});for(const e of N){const t=this._countMap.get(e.square);if(!t||0===t)throw Error("cannot remove attack that does not exist");this._countMap.set(e.square,t-1)}this._squareControlByPiece.set(e,[])}removeAttacks(e,t,N=!0){const a=this._squareControlByPiece.get(e);if(!a)throw Error("there should be square control from this square");N&&this._updatesStack[this._updatesStack.length-1].push({type:Z.PartialRemove,square:e,squares:t});const s=t.map((e=>e.square));for(const e of t){const t=this._countMap.get(e.square);if(!t||0===t)throw Error("cannot remove attack that does not exist");this._countMap.set(e.square,t-1)}for(let e=a.length-1;e>=0;e--){const t=a[e];s.includes(t.square)&&a.splice(e,1)}}}const X=(e,t,N,{attacksOnly:a,advanceOnly:I,enPassantSquare:o})=>{let r=[];const K=(0,i.P$)(t),O=t===s.Il.White?C:M,n=t===s.Il.White?M:C;if(a||!(0,i.ey)(O(N))||e.get(O(N))||(r.push({from:N,to:O(N),piece:{type:s.WA.Pawn,color:t}}),!e.get(O(N,2))&&(0,i.UW)(t,N)&&r.push({from:N,to:O(N,2),piece:{type:s.WA.Pawn,color:t}})),!I){const a=O(L(N)),i=O($(N)),I=a===o?e.get(n(o)):e.get(a),c=i===o?e.get(n(o)):e.get(i);a%8!=7&&I?.color===K&&r.push({from:N,to:a,piece:{type:s.WA.Pawn,color:t},attack:{attacker:{square:N,type:s.WA.Pawn},attacked:{square:a,type:I.type},slideSquares:[]}}),i%8!=0&&c?.color===K&&r.push({from:N,to:i,piece:{type:s.WA.Pawn,color:t},attack:{attacker:{square:N,type:s.WA.Pawn},attacked:{square:i,type:c.type},slideSquares:[]}})}return(0,i.gi)(t,N)&&(r=r.flatMap((e=>[s.WA.Bishop,s.WA.Knight,s.WA.Queen,s.WA.Rook].map((t=>({...e,promotion:t})))))),r},V=(e,t,N)=>h[N].filter((N=>e.get(N)?.color!==t)).map((a=>{let i;const I=e.get(a);return I&&(i={attacker:{square:N,type:s.WA.Knight},attacked:{square:a,type:I.type},slideSquares:[]}),{from:N,to:a,piece:{type:s.WA.Knight,color:t},attack:i}})),J=(e,t,N,{castlingOnly:a,castlingAvailability:I})=>{const o=a?[]:B[N].filter((N=>e.get(N)?.color!==t));return!I[t].kingside||e.get($(N))||0!==Ne(e,(0,i.P$)(t),$(N),{enPassantSquare:null,skip:[N]}).length||e.get($(N,2))||o.push($(N,2)),!I[t].queenside||e.get(L(N))||0!==Ne(e,(0,i.P$)(t),L(N),{enPassantSquare:null,skip:[N]}).length||e.get(L(N,2))||e.get(L(N,3))||o.push(L(N,2)),o.map((a=>{let i;const I=e.get(a);return I&&(i={attacker:{square:N,type:s.WA.King},attacked:{square:a,type:I.type},slideSquares:[]}),{from:N,to:a,piece:{type:s.WA.King,color:t},attack:i}}))},ee=(e,t,N,{skip:a=[]})=>S[N].flatMap((i=>z(e,{square:N,piece:{color:t,type:s.WA.Bishop}},i,{skip:a}))),te=(e,t,N,{skip:a=[]})=>R[N].flatMap((i=>z(e,{square:N,piece:{color:t,type:s.WA.Rook}},i,{skip:a}))),Ne=(e,t,N,{enPassantSquare:a,skip:I})=>{const o=[],r=(0,i.P$)(t),K=[J(e,r,N,{castlingOnly:!1,castlingAvailability:i.oW}),ee(e,r,N,{skip:I}),te(e,r,N,{skip:I}),V(e,r,N),X(e,r,N,{advanceOnly:!1,attacksOnly:!0,enPassantSquare:a})];for(const t of K)for(const N of t)if(N.attack){const t=e.get(N.to);N.attack.attacker.type===s.WA.Bishop||N.attack.attacker.type===s.WA.Rook?!t||t.type!==N.attack.attacker.type&&t.type!==s.WA.Queen||o.push({attacked:N.attack.attacker,attacker:N.attack.attacked,slideSquares:N.attack.slideSquares}):t&&t.type===N.attack.attacker.type&&o.push({attacked:N.attack.attacker,attacker:N.attack.attacked,slideSquares:N.attack.slideSquares})}return o},ae=(e,t,N)=>{switch(e.type){case s.WA.Bishop:return m[t][N];case s.WA.Rook:return b[t][N];case s.WA.Queen:return _[t][N];default:return!1}},se=(e,t,N)=>{const a=t[s.Il.White],i=t[s.Il.Black];let I,o;return a&&(I=Ne(e,s.Il.Black,a,{...N,skip:[a]})),i&&(o=Ne(e,s.Il.White,i,{...N,skip:[i]})),{[s.Il.White]:I||[],[s.Il.Black]:o||[]}},ie={TURN:270825591.170619,PIECE_SQUARE:{WHITE:{0:{BISHOP:1926361364.9690251,KING:702920854.1250172,KNIGHT:1120910899.9675941,PAWN:1324185163.5568056,QUEEN:606634320.0805407,ROOK:1769784327.4455094},1:{BISHOP:829688824.2531772,KING:1273139495.8316288,KNIGHT:199175906.57450533,PAWN:929175534.7463441,QUEEN:683021096.0875382,ROOK:1314978979.4138036},2:{BISHOP:1565555831.0517735,KING:399492873.9945774,KNIGHT:1384523056.2010198,PAWN:1211331354.9586048,QUEEN:486843663.39057684,ROOK:458557340.7732873},3:{BISHOP:692767582.2141991,KING:1980492936.1579986,KNIGHT:389659792.9430227,PAWN:881671083.4949698,QUEEN:433333620.75548077,ROOK:852605247.0679102},4:{BISHOP:118058328.1007266,KING:457856093.14535,KNIGHT:588016510.6200061,PAWN:1124649718.6165156,QUEEN:34921412.12726927,ROOK:2004182636.8229923},5:{BISHOP:1810585405.0844793,KING:487650051.11560106,KNIGHT:1797000251.8091884,PAWN:357020614.5895958,QUEEN:1594476354.6428094,ROOK:1171772447.1993914},6:{BISHOP:691277415.8286214,KING:391960823.4938035,KNIGHT:447454793.5261202,PAWN:948469866.9980516,QUEEN:1102694343.209258,ROOK:1568850505.4040961},7:{BISHOP:667894647.9084759,KING:1043693960.9393797,KNIGHT:215722026.26092958,PAWN:1475595210.2342257,QUEEN:2123256395.2977343,ROOK:79554651.50309658},8:{BISHOP:1462002010.186716,KING:677435895.9490104,KNIGHT:1821114919.5665627,PAWN:421964475.58065844,QUEEN:191554301.50343895,ROOK:188483122.87717628},9:{BISHOP:988826229.3022022,KING:1203298284.9104996,KNIGHT:2119564806.2291613,PAWN:395385948.96976805,QUEEN:1636904464.6716514,ROOK:1109016680.20536},10:{BISHOP:1174353944.7194185,KING:752723154.4926367,KNIGHT:833917873.1737022,PAWN:334415901.0620656,QUEEN:1296709854.1284895,ROOK:515775360.20910645},11:{BISHOP:1629673317.6786427,KING:120306929.43212128,KNIGHT:1461180770.2383404,PAWN:83664553.50644493,QUEEN:556679397.540492,ROOK:739848723.5937114},12:{BISHOP:2036505576.671373,KING:1264277308.2564816,KNIGHT:52974178.13695431,PAWN:1422254393.4277453,QUEEN:2097646933.828794,ROOK:887363642.2998247},13:{BISHOP:1311302415.5884585,KING:1987065881.476512,KNIGHT:713893157.6709595,PAWN:439458189.59896135,QUEEN:778552125.7141051,ROOK:1494716890.5141993},14:{BISHOP:626532260.3161292,KING:1980276756.555184,KNIGHT:646751723.7203345,PAWN:288790403.39630747,QUEEN:1265057529.727273,ROOK:852664017.0242481},15:{BISHOP:1608555852.664114,KING:1213987146.8265486,KNIGHT:689098621.3252168,PAWN:72357322.19590187,QUEEN:1811552397.4439878,ROOK:1404001400.042204},16:{BISHOP:1219851233.751317,KING:361676829.16314983,KNIGHT:2127074631.8986855,PAWN:428884453.6728821,QUEEN:1723180035.8536081,ROOK:727914408.5531545},17:{BISHOP:764242880.7187052,KING:467944506.0799308,KNIGHT:1538780123.7411823,PAWN:1549123896.0492826,QUEEN:1515823547.4651103,ROOK:66385163.94209576},18:{BISHOP:1910686032.6228395,KING:337922508.39271545,KNIGHT:1253822558.9798017,PAWN:334287258.9015908,QUEEN:601809141.0765872,ROOK:655745070.3108311},19:{BISHOP:1505449914.8775954,KING:1906445086.0977716,KNIGHT:645845532.8094072,PAWN:321226889.9490485,QUEEN:1264959228.4921494,ROOK:691501282.9326978},20:{BISHOP:1959775021.2283955,KING:2010222932.320693,KNIGHT:546292551.1374717,PAWN:1609545745.388722,QUEEN:347774824.70681524,ROOK:1262427677.7783194},21:{BISHOP:1269351208.3549056,KING:754830424.82865,KNIGHT:856534440.6919394,PAWN:1945582296.0572772,QUEEN:340758953.4152441,ROOK:472855287.18488646},22:{BISHOP:1132664727.7788386,KING:1686494070.3267155,KNIGHT:1099815885.086081,PAWN:1493104635.9288888,QUEEN:837196113.1697321,ROOK:895238072.5343494},23:{BISHOP:974057853.4088674,KING:1107304346.6471853,KNIGHT:1661980214.0086904,PAWN:879762986.9989958,QUEEN:1325027379.0442996,ROOK:1917738513.5326343},24:{BISHOP:222528611.93420458,KING:385528275.93225527,KNIGHT:127628344.26795387,PAWN:274631938.4941511,QUEEN:936081472.113605,ROOK:795509265.9952569},25:{BISHOP:1622838000.2147512,KING:1631363677.848062,KNIGHT:317820966.9353123,PAWN:317033154.31644726,QUEEN:502933563.8609257,ROOK:1432096692.5286489},26:{BISHOP:2095736936.5970345,KING:314227062.0999274,KNIGHT:1279892548.1990495,PAWN:761192423.3580852,QUEEN:445288439.2342782,ROOK:530058320.59593725},27:{BISHOP:1212436890.6782436,KING:427222685.33253956,KNIGHT:1706894697.1228924,PAWN:1477644617.694725,QUEEN:1984325271.8148332,ROOK:1075803868.5788026},28:{BISHOP:963961374.3586855,KING:1658254647.4794097,KNIGHT:2054506563.6831856,PAWN:99490106.60668945,QUEEN:1492490830.8668509,ROOK:110287287.07386303},29:{BISHOP:177161641.81376266,KING:386124598.2368512,KNIGHT:772961895.241889,PAWN:1930378388.2391744,QUEEN:878702802.5201626,ROOK:978936058.0746794},30:{BISHOP:1868720578.7890286,KING:990785756.4146538,KNIGHT:1124299054.8672495,PAWN:888880025.924026,QUEEN:288408525.56794834,ROOK:2181963.833068371},31:{BISHOP:1237236145.3689494,KING:1945747.0187592506,KNIGHT:243815101.03584766,PAWN:176744701.29511452,QUEEN:13419785.59757328,ROOK:1662901970.7028203},32:{BISHOP:1406791776.0691614,KING:2057164180.7022495,KNIGHT:1518305510.4663596,PAWN:1951072937.3225017,QUEEN:638497040.4542341,ROOK:895732686.2993579},33:{BISHOP:608601710.3434153,KING:886046539.8338146,KNIGHT:1861458684.9603138,PAWN:200017571.62738228,QUEEN:1775181593.6304255,ROOK:451311857.54151154},34:{BISHOP:1129909856.8774443,KING:2144136268.9039936,KNIGHT:1636989370.0587692,PAWN:903116375.0853448,QUEEN:365228675.0221939,ROOK:713541397.1822448},35:{BISHOP:895252756.2447252,KING:1060644417.7780647,KNIGHT:496967727.96466875,PAWN:358428783.9543252,QUEEN:512550444.6167612,ROOK:362082620.54011726},36:{BISHOP:925039224.4602318,KING:1941679010.106985,KNIGHT:1409293601.1986895,PAWN:581143306.1889114,QUEEN:1170571366.7982507,ROOK:2128590899.4492488},37:{BISHOP:1279504110.6995592,KING:1826525628.520454,KNIGHT:1084385728.494347,PAWN:812912440.0693789,QUEEN:1912020738.2598147,ROOK:1333258781.9129324},38:{BISHOP:176340840.0182233,KING:611110083.2010283,KNIGHT:518227552.10848093,PAWN:931620378.0640249,QUEEN:1041832494.9838533,ROOK:1380538807.6807022},39:{BISHOP:1312651332.851986,KING:2042550987.5856037,KNIGHT:1425436358.9206414,PAWN:1590190823.0058699,QUEEN:2113280239.5630422,ROOK:1014528830.5473847},40:{BISHOP:1657400134.5598254,KING:264271010.8890257,KNIGHT:488520928.1842499,PAWN:268997125.67831945,QUEEN:344262195.15375805,ROOK:1248163485.8193636},41:{BISHOP:28888254.691999435,KING:332424880.10917616,KNIGHT:537987684.9504805,PAWN:318344002.44526625,QUEEN:1904659334.8619328,ROOK:1365654628.1976624},42:{BISHOP:946609756.4896569,KING:926320701.1229091,KNIGHT:1688569559.9928918,PAWN:1566766365.8892255,QUEEN:837139216.2721,ROOK:878541233.7031841},43:{BISHOP:1485399738.3879023,KING:1546534753.9537988,KNIGHT:897362787.7182918,PAWN:814791347.5164208,QUEEN:212960274.73117733,ROOK:1654239677.4419265},44:{BISHOP:1380194936.8445082,KING:1589253852.8097343,KNIGHT:1286760064.597055,PAWN:550669925.7106681,QUEEN:2067039022.6591167,ROOK:218002350.1900339},45:{BISHOP:1536815704.6501842,KING:885344967.2724786,KNIGHT:445616363.6494088,PAWN:1650049944.1488824,QUEEN:1701267003.3840704,ROOK:198696985.82343245},46:{BISHOP:1366817919.5580144,KING:1392299280.7264462,KNIGHT:1427150765.2160358,PAWN:508061491.28315496,QUEEN:756878796.5456839,ROOK:1299596284.2749214},47:{BISHOP:1022000057.0079856,KING:21937121.646343708,KNIGHT:1895486874.7347126,PAWN:1844876088.5216527,QUEEN:401054485.8423815,ROOK:182507745.89006805},48:{BISHOP:2036381128.8122783,KING:24627941.934511185,KNIGHT:1226331490.117867,PAWN:689459650.93684,QUEEN:1861019677.8504853,ROOK:1790492250.5948606},49:{BISHOP:1261799070.7642488,KING:111143502.14655638,KNIGHT:1014097635.7162137,PAWN:1378211537.592011,QUEEN:1639830815.826723,ROOK:537424679.1282115},50:{BISHOP:1470294316.1830983,KING:200542456.7395382,KNIGHT:1996257109.3337603,PAWN:1362744152.387281,QUEEN:2043525564.0629354,ROOK:1629197715.874361},51:{BISHOP:1454301340.9433823,KING:838265100.5275817,KNIGHT:1798327320.8161058,PAWN:1684343677.2774372,QUEEN:174137610.40923643,ROOK:1412933236.4041443},52:{BISHOP:2084066884.867127,KING:1394270710.1642413,KNIGHT:715762187.0862498,PAWN:2057651718.1733751,QUEEN:210542099.31473064,ROOK:452040143.98267984},53:{BISHOP:475417108.3382244,KING:1226683551.4563007,KNIGHT:1668026220.3113804,PAWN:1941833907.6222649,QUEEN:299268354.0348711,ROOK:1856642841.5185423},54:{BISHOP:144383215.80680275,KING:619065989.6797609,KNIGHT:238014020.6481352,PAWN:1799220611.9063764,QUEEN:407972858.525228,ROOK:1295275644.692679},55:{BISHOP:1454302983.5913124,KING:176714018.14689636,KNIGHT:224749218.53023005,PAWN:1925969642.3037906,QUEEN:831434140.2500644,ROOK:748804575.7862248},56:{BISHOP:15480635.525814533,KING:510107748.3308301,KNIGHT:131587634.72089148,PAWN:501986312.7169957,QUEEN:2005907931.405242,ROOK:871033011.1157317},57:{BISHOP:2027967865.0402274,KING:676417734.7170587,KNIGHT:1373213186.818357,PAWN:1652497975.9365273,QUEEN:350910030.6006985,ROOK:475493333.51662827},58:{BISHOP:742390857.0233622,KING:1776197043.422182,KNIGHT:1289880338.0253906,PAWN:161402201.26762247,QUEEN:986507775.3751535,ROOK:603407393.292759},59:{BISHOP:170215206.24140692,KING:361036664.6790948,KNIGHT:1947452631.3942676,PAWN:1560351353.17276,QUEEN:898688569.0167246,ROOK:953894048.5821729},60:{BISHOP:1189298327.3194776,KING:641916336.9601603,KNIGHT:1330015071.8107338,PAWN:1663922196.3277102,QUEEN:1637633691.9317622,ROOK:805106778.6077752},61:{BISHOP:440522152.2600193,KING:1130604781.7388844,KNIGHT:2130603599.7206888,PAWN:746415395.7557774,QUEEN:549275108.4875412,ROOK:1014980449.4959044},62:{BISHOP:2073533390.6684308,KING:74929031.24770355,KNIGHT:1984292883.2900286,PAWN:454709458.3189163,QUEEN:597078941.5722032,ROOK:1903756947.9216785},63:{BISHOP:126321066.81340933,KING:299186638.34001255,KNIGHT:343400644.8169532,PAWN:654281673.8665137,QUEEN:1065429786.073039,ROOK:767746409.4711008}},BLACK:{0:{BISHOP:1057152346.508728,KING:1775495926.155263,KNIGHT:163657662.1263237,PAWN:1064103870.9844661,QUEEN:329826634.03912544,ROOK:1180910805.3084798},1:{BISHOP:1714987879.8988051,KING:725348886.7501698,KNIGHT:358416048.746377,PAWN:1685669044.2370343,QUEEN:560330656.5035758,ROOK:643623366.5036721},2:{BISHOP:1008628086.3079991,KING:2058717377.9305835,KNIGHT:1170703622.8466787,PAWN:1675123641.330378,QUEEN:1279818452.685287,ROOK:1390422778.8758636},3:{BISHOP:1164430007.6217604,KING:1138293928.7428956,KNIGHT:448085048.07841206,PAWN:992099780.6235929,QUEEN:508870783.5298238,ROOK:255129172.51639748},4:{BISHOP:686157427.0454378,KING:1481314047.2032843,KNIGHT:959610771.2238574,PAWN:421755888.70490026,QUEEN:944864560.5032153,ROOK:358258536.3164401},5:{BISHOP:432779369.5023403,KING:480995616.45533514,KNIGHT:1359277480.782908,PAWN:1270289164.1929097,QUEEN:680701284.2606974,ROOK:962685364.5382771},6:{BISHOP:276672515.1131635,KING:981200422.8057585,KNIGHT:1321321417.5588646,PAWN:1524845660.6981196,QUEEN:1311423412.0643964,ROOK:2004428999.3815107},7:{BISHOP:78524539.98241377,KING:1767127093.024212,KNIGHT:1665750301.4017243,PAWN:1877393355.9675279,QUEEN:1310515589.3988376,ROOK:445358198.89010096},8:{BISHOP:981169117.8444939,KING:295218274.81590986,KNIGHT:2010675896.4663372,PAWN:2093485109.0696354,QUEEN:414674215.3056102,ROOK:790266774.7954326},9:{BISHOP:1874161840.191585,KING:299356834.93755436,KNIGHT:851323545.7243571,PAWN:303643234.8814659,QUEEN:1956915368.0246587,ROOK:1904278830.483296},10:{BISHOP:446069087.21192217,KING:1166389009.8160677,KNIGHT:1566403844.6139164,PAWN:749451368.902039,QUEEN:1470725964.7466679,ROOK:628522428.9103713},11:{BISHOP:1590355032.1708922,KING:1839319852.22995,KNIGHT:1464134088.3739948,PAWN:190116451.3890953,QUEEN:1843147107.593895,ROOK:818735276.532011},12:{BISHOP:32203961.965452194,KING:1623667363.7550702,KNIGHT:1816596506.8395553,PAWN:1800646351.6526542,QUEEN:667780417.697022,ROOK:1947475313.0786352},13:{BISHOP:366832268.0379424,KING:604399243.6182122,KNIGHT:645782063.3031859,PAWN:1460211114.8960028,QUEEN:107092718.17937517,ROOK:1630750048.6912403},14:{BISHOP:1219781727.789318,KING:978653223.641778,KNIGHT:1818493757.0414495,PAWN:890254790.2582355,QUEEN:1362758672.6100574,ROOK:2109252659.1459928},15:{BISHOP:1013877793.8452868,KING:2023135602.5044408,KNIGHT:194333598.85536718,PAWN:29562085.507798195,QUEEN:2121002984.482108,ROOK:993280649.2228484},16:{BISHOP:2136597620.0501618,KING:280690857.6759181,KNIGHT:155088589.72381258,PAWN:2006301916.1310568,QUEEN:1636210494.3545651,ROOK:1659644649.9924955},17:{BISHOP:1715335114.6822414,KING:1134876558.914577,KNIGHT:543724811.8886585,PAWN:1144525903.9093976,QUEEN:1846392340.7267275,ROOK:27891031.21978903},18:{BISHOP:2080433447.2886262,KING:1428303697.0889254,KNIGHT:1142970330.0198107,PAWN:1679037674.1749554,QUEEN:2063970486.3897557,ROOK:1992766.1231675148},19:{BISHOP:1938090257.242556,KING:1042666907.4955258,KNIGHT:781038790.3490772,PAWN:1894210752.6188278,QUEEN:1587198977.878759,ROOK:1747129484.7413144},20:{BISHOP:1330101235.9846258,KING:8501071.78941536,KNIGHT:544860639.4981232,PAWN:1449567213.2416086,QUEEN:921082145.9927254,ROOK:1713719907.8689065},21:{BISHOP:1538282774.9037528,KING:782513958.3844771,KNIGHT:775744182.3179326,PAWN:2122117629.7825975,QUEEN:1623322209.0145593,ROOK:1147734709.6570563},22:{BISHOP:1126454479.0987048,KING:797178961.6143069,KNIGHT:2119496485.9017906,PAWN:320353669.6177373,QUEEN:536807909.40606356,ROOK:2059277804.6967764},23:{BISHOP:303486958.68729687,KING:870338230.5681424,KNIGHT:864954916.9424906,PAWN:2000957678.3306966,QUEEN:944195065.1053858,ROOK:1148974358.9426131},24:{BISHOP:704082603.5936365,KING:897546417.9045944,KNIGHT:510913029.9682107,PAWN:1668190352.7663465,QUEEN:1695960880.086279,ROOK:1133766795.8375258},25:{BISHOP:2074102970.2966404,KING:322736214.11841965,KNIGHT:2060575524.6019135,PAWN:905109176.2468605,QUEEN:2121593698.6868095,ROOK:532162472.48582983},26:{BISHOP:22654145.166287422,KING:1146032309.363912,KNIGHT:1598749492.721858,PAWN:27307317.291355133,QUEEN:1589296896.6310563,ROOK:957680844.1186943},27:{BISHOP:218559445.3238449,KING:786021685.5808148,KNIGHT:438248051.5038285,PAWN:1353600200.8186617,QUEEN:1209797381.3535442,ROOK:843833941.9504948},28:{BISHOP:237886696.95338774,KING:563542331.8816438,KNIGHT:1996373426.5395417,PAWN:157849276.00371122,QUEEN:279880158.4391203,ROOK:754508394.4910254},29:{BISHOP:674408488.7887492,KING:182712860.32575035,KNIGHT:983821360.8959785,PAWN:514731613.8603625,QUEEN:1617469832.7925382,ROOK:641801905.0600009},30:{BISHOP:1375480111.6695871,KING:1325295474.5267072,KNIGHT:1868472544.7256217,PAWN:937475884.5031877,QUEEN:318794391.487092,ROOK:1066985526.9389639},31:{BISHOP:1660340124.8619227,KING:1476101141.1681232,KNIGHT:641185483.4652591,PAWN:2054319737.6339817,QUEEN:1289360161.2491965,ROOK:126074978.3410182},32:{BISHOP:486807212.73340607,KING:1659248112.7638693,KNIGHT:1565817925.4241009,PAWN:2075894152.0771465,QUEEN:1664607371.688787,ROOK:969783106.5155673},33:{BISHOP:605639421.7747884,KING:920659030.4125681,KNIGHT:1228713655.5454535,PAWN:387111377.6126952,QUEEN:907207632.4744763,ROOK:1623286403.5100112},34:{BISHOP:2039037278.707748,KING:691786336.9023747,KNIGHT:1383510021.534894,PAWN:1287129711.9166784,QUEEN:499265798.0977812,ROOK:165302449.25205612},35:{BISHOP:1572538515.2764635,KING:1103557163.308599,KNIGHT:665807991.6452904,PAWN:1288683605.3002076,QUEEN:1996100667.20745,ROOK:779440424.5046463},36:{BISHOP:1811087718.9719305,KING:1406748460.7438269,KNIGHT:1571110347.120346,PAWN:1989614577.8390574,QUEEN:1514634978.9164233,ROOK:2003602615.4765577},37:{BISHOP:2097008803.6734767,KING:1521817762.283245,KNIGHT:1593082353.4715195,PAWN:1892411881.0816207,QUEEN:1727933585.5103617,ROOK:412087325.45490694},38:{BISHOP:1409793108.9246793,KING:1349377593.7944374,KNIGHT:599245647.7315369,PAWN:1853680443.3032122,QUEEN:862371325.357039,ROOK:820191963.9480777},39:{BISHOP:604137807.0622449,KING:1085397672.6297383,KNIGHT:536968585.3983197,PAWN:6923201.696920395,QUEEN:2096303545.2169118,ROOK:1451650132.2264552},40:{BISHOP:287725174.64949656,KING:1707143236.7571316,KNIGHT:1424162624.034274,PAWN:1329054460.1705775,QUEEN:171659043.86326265,ROOK:1918827118.6432252},41:{BISHOP:601973943.0385079,KING:1016709594.3005319,KNIGHT:728907624.0826936,PAWN:1498940317.4059696,QUEEN:1194679146.2450747,ROOK:1630322942.512426},42:{BISHOP:1399642986.7099867,KING:2036608426.1134353,KNIGHT:640857368.4557724,PAWN:2004194896.2744522,QUEEN:1128157988.9480228,ROOK:1566997714.356554},43:{BISHOP:690472814.9992561,KING:342284480.3074136,KNIGHT:728131116.3078351,PAWN:120121968.3147912,QUEEN:2113107363.483882,ROOK:661274811.3897123},44:{BISHOP:937364186.54744,KING:1073077854.5047731,KNIGHT:108470812.73396301,PAWN:1992657566.5579257,QUEEN:747063480.4206691,ROOK:1887754069.5485945},45:{BISHOP:1096398650.703332,KING:2032055441.529663,KNIGHT:2295408.782040119,PAWN:583566519.9143915,QUEEN:1756257940.5453238,ROOK:333132211.48287106},46:{BISHOP:1387000147.7393732,KING:1214988306.2158313,KNIGHT:834779990.008038,PAWN:997691525.7292204,QUEEN:826027383.0782452,ROOK:601939795.339097},47:{BISHOP:585593952.4653053,KING:1207010189.923102,KNIGHT:225480656.79915285,PAWN:750829004.5123539,QUEEN:1304484056.8826318,ROOK:719675799.7906513},48:{BISHOP:2092547383.2204552,KING:21391278.207526684,KNIGHT:241817319.17341614,PAWN:2079496681.728003,QUEEN:1700187169.6072383,ROOK:310277401.70457745},49:{BISHOP:1604636753.096282,KING:1623820378.1488008,KNIGHT:1427982036.8750439,PAWN:297167432.77143,QUEEN:453005247.3379345,ROOK:1238244486.9393363},50:{BISHOP:248207288.04046488,KING:1892047983.5250492,KNIGHT:1758639405.746151,PAWN:879522392.9421091,QUEEN:2073966670.2563906,ROOK:779022531.223547},51:{BISHOP:425029529.29339266,KING:2017331614.0433764,KNIGHT:1853406238.1555996,PAWN:1626538221.4198709,QUEEN:1897850111.1669712,ROOK:1046957919.0831189},52:{BISHOP:604872150.9067922,KING:515977993.34316206,KNIGHT:588826419.6598067,PAWN:1620368826.603253,QUEEN:1379978335.564248,ROOK:879852462.3549376},53:{BISHOP:1167549767.3037605,KING:1374521152.0908594,KNIGHT:1241019323.0203729,PAWN:1333630126.815805,QUEEN:487174199.0963268,ROOK:227166911.9865446},54:{BISHOP:636607082.8918648,KING:388524158.65565825,KNIGHT:1070931226.0993161,PAWN:820804912.1336713,QUEEN:1985891570.8060083,ROOK:841100777.1269355},55:{BISHOP:893171938.5076838,KING:722601816.0981998,KNIGHT:1435562903.4864254,PAWN:372212177.3538294,QUEEN:755781085.3993607,ROOK:2063493507.73218},56:{BISHOP:368929412.1202769,KING:2061321259.737813,KNIGHT:1424600183.5758462,PAWN:1384823801.4864702,QUEEN:1790605529.6986217,ROOK:158732386.55319977},57:{BISHOP:989171634.4518714,KING:1638984100.401847,KNIGHT:663946489.6742959,PAWN:1696784198.0083313,QUEEN:569319622.7410345,ROOK:1733347655.2271929},58:{BISHOP:253078675.3312478,KING:90598362.27521276,KNIGHT:127037211.76310444,PAWN:1082306948.9273753,QUEEN:412496831.05318356,ROOK:1226366754.0972009},59:{BISHOP:1466036749.8688436,KING:1143986868.6794643,KNIGHT:692819828.044631,PAWN:1540913517.4688134,QUEEN:1036041630.6516981,ROOK:998519995.2247095},60:{BISHOP:663988035.6810694,KING:1115052476.763802,KNIGHT:1411262819.9679408,PAWN:584646761.3865838,QUEEN:17503471.593949795,ROOK:554205445.7071657},61:{BISHOP:1177178060.3264823,KING:1069746353.7653189,KNIGHT:27501808.58494425,PAWN:578171192.1758509,QUEEN:1715590539.158741,ROOK:514687925.2052312},62:{BISHOP:1190468988.1989498,KING:1918426708.003315,KNIGHT:1618387369.7146235,PAWN:376187400.5184622,QUEEN:616414117.3050246,ROOK:301267782.29258823},63:{BISHOP:422604120.9469938,KING:2131125743.5231805,KNIGHT:2039769150.8438134,PAWN:1696372096.8439198,QUEEN:298434074.5101919,ROOK:1338979190.2041779}}},CASTLING_AVAILABILITY:{WHITE:{kingside:1753117804.9440327,queenside:1249753307.6009521},BLACK:{kingside:1997117866.0802016,queenside:1372538.756307125}}},Ie={TURN:74356811.50603724,PIECE_SQUARE:{WHITE:{0:{BISHOP:861341035.6156178,KING:440943450.8888521,KNIGHT:1956314555.044403,PAWN:975239593.8940501,QUEEN:1170952982.8862405,ROOK:560523709.0272489},1:{BISHOP:294888938.37637615,KING:1397988039.3188143,KNIGHT:133191818.37716103,PAWN:1753336952.2667356,QUEEN:1095191644.4291701,ROOK:1430143993.9440665},2:{BISHOP:1993864901.3667994,KING:801491736.3471618,KNIGHT:2059043655.3169584,PAWN:911904966.2964544,QUEEN:1013225697.0365329,ROOK:1723952345.9951758},3:{BISHOP:572450033.4628143,KING:1633581387.0142522,KNIGHT:1514454322.0312862,PAWN:1574487245.5165153,QUEEN:256374545.71524668,ROOK:1782591601.743496},4:{BISHOP:1502268025.1035004,KING:800608568.89608,KNIGHT:95253479.24864817,PAWN:1084960213.4851685,QUEEN:948918523.0714216,ROOK:235802860.3308673},5:{BISHOP:1574222294.6712189,KING:434992276.4371438,KNIGHT:1131645198.5812478,PAWN:1581749.0542736053,QUEEN:924686824.922482,ROOK:1431545540.6720605},6:{BISHOP:990046386.6007895,KING:420352238.74541426,KNIGHT:165090135.71856785,PAWN:1809289206.1134071,QUEEN:888941741.9726892,ROOK:207412390.93214083},7:{BISHOP:1772351650.0243216,KING:1903948841.038415,KNIGHT:1416928921.348339,PAWN:1457438695.6389089,QUEEN:2079582706.7014709,ROOK:1374377209.5474973},8:{BISHOP:1513307104.3404522,KING:1677275856.2605038,KNIGHT:774515503.7519188,PAWN:731732940.6124516,QUEEN:2041942008.0233698,ROOK:1848777336.2101827},9:{BISHOP:1410527623.1674762,KING:1602952907.3430233,KNIGHT:922651514.8076758,PAWN:1831712776.6882644,QUEEN:2108666188.974115,ROOK:740280185.2326164},10:{BISHOP:2086665041.7666264,KING:1765660562.9211464,KNIGHT:788606580.773685,PAWN:939090915.5447102,QUEEN:28247346.681787968,ROOK:877100548.1329341},11:{BISHOP:1392351950.1717224,KING:267803858.59800148,KNIGHT:578401790.893475,PAWN:2061780910.8415618,QUEEN:976442309.3637013,ROOK:1814194265.9168801},12:{BISHOP:1004318683.6074014,KING:1816700535.4241338,KNIGHT:413080734.0878563,PAWN:527087319.47822,QUEEN:1694317254.0669994,ROOK:1466319705.8902159},13:{BISHOP:581490722.4040647,KING:1305695600.234036,KNIGHT:410518510.02908516,PAWN:88670881.76949835,QUEEN:1639439865.053289,ROOK:1063318967.2351236},14:{BISHOP:237812129.96675205,KING:504949086.66204596,KNIGHT:419585554.4220867,PAWN:1888384495.1621447,QUEEN:634216344.509788,ROOK:1676598637.3583279},15:{BISHOP:1983191136.1775393,KING:1505195928.8493772,KNIGHT:1240022220.8380394,PAWN:31605283.4687891,QUEEN:79891865.56516838,ROOK:976982142.2098794},16:{BISHOP:1302962150.6337109,KING:1731385121.256939,KNIGHT:1766382983.6523461,PAWN:459216170.28981495,QUEEN:930710410.8628588,ROOK:1247876556.559248},17:{BISHOP:1915738910.4332204,KING:125506942.42015314,KNIGHT:462901469.52844477,PAWN:1570387586.9256992,QUEEN:2138311026.947639,ROOK:1440749806.1110368},18:{BISHOP:308759921.90068626,KING:1168651780.3691516,KNIGHT:1845903219.5737286,PAWN:1064327721.7365284,QUEEN:1864004732.8455067,ROOK:1579485468.6176572},19:{BISHOP:569034785.6693659,KING:367669716.2953801,KNIGHT:735148863.6374755,PAWN:25318015.44554138,QUEEN:981881633.6674585,ROOK:1264585440.781927},20:{BISHOP:1677652260.191895,KING:105403229.67763662,KNIGHT:205487827.07758904,PAWN:666130523.5268836,QUEEN:1964588793.239523,ROOK:1663600819.0688558},21:{BISHOP:70968868.08872747,KING:2077207865.733891,KNIGHT:1214092399.3193536,PAWN:1445265867.4307027,QUEEN:324548634.2549615,ROOK:2003305828.1649795},22:{BISHOP:889408930.4004774,KING:1531216690.374353,KNIGHT:669485203.2534547,PAWN:1542816078.6773896,QUEEN:140423912.5978136,ROOK:1049272794.2635393},23:{BISHOP:804149042.4560361,KING:461792277.7703328,KNIGHT:1203373543.6419964,PAWN:316343965.8069267,QUEEN:1539784477.2975712,ROOK:1660453719.7860808},24:{BISHOP:428108609.46714926,KING:789169832.9146428,KNIGHT:1538449370.4954066,PAWN:344018112.456542,QUEEN:1576860197.619587,ROOK:1811472197.0414133},25:{BISHOP:634632231.6837878,KING:369591216.34972525,KNIGHT:1892747654.0404048,PAWN:1634705423.4460845,QUEEN:537384035.4488883,ROOK:1535514165.8614163},26:{BISHOP:721054370.9654884,KING:1605654109.563064,KNIGHT:1749293114.0790544,PAWN:1151892454.6889153,QUEEN:847250492.8472142,ROOK:2080025371.6479445},27:{BISHOP:226017672.01788473,KING:1457346624.7424793,KNIGHT:1818943343.6204643,PAWN:2110601358.9580956,QUEEN:1928587974.6564302,ROOK:853114235.8098354},28:{BISHOP:2030599282.2718453,KING:726226881.1910167,KNIGHT:845067968.2476912,PAWN:1212603810.6342816,QUEEN:880498332.7734642,ROOK:1433601106.6147914},29:{BISHOP:583345287.6037245,KING:943597983.064044,KNIGHT:1990323160.7103176,PAWN:1393468475.1348014,QUEEN:664496900.4079022,ROOK:1963888643.2140346},30:{BISHOP:1235273526.4147153,KING:2033376651.2232962,KNIGHT:271409729.4951372,PAWN:1959412539.6701803,QUEEN:939701945.7941184,ROOK:966996714.842804},31:{BISHOP:145368338.09086943,KING:1545065690.241078,KNIGHT:1770255667.754294,PAWN:1942678505.5972457,QUEEN:221890606.88170767,ROOK:882967444.6415758},32:{BISHOP:795872557.8191628,KING:519688458.3189182,KNIGHT:1268199412.2415485,PAWN:1541570077.098946,QUEEN:370066956.96581364,ROOK:1608076068.420586},33:{BISHOP:32309136.463570118,KING:1683631220.872798,KNIGHT:658082949.120533,PAWN:719943891.085742,QUEEN:1594221733.6647358,ROOK:1413550147.357142},34:{BISHOP:1979869178.5514727,KING:471534460.690856,KNIGHT:13041877.737101555,PAWN:1162748083.141768,QUEEN:1749243483.5807161,ROOK:1054828071.6408176},35:{BISHOP:1187654176.6733737,KING:1930085654.2477121,KNIGHT:1330691061.1273875,PAWN:1209555944.5174317,QUEEN:326506280.49183655,ROOK:698290405.8862786},36:{BISHOP:152260967.9554391,KING:1002303542.3877544,KNIGHT:587419171.3590746,PAWN:1648573685.9809175,QUEEN:874567402.754044,ROOK:1253161273.64429},37:{BISHOP:1255586152.5618248,KING:1358576289.2283573,KNIGHT:875939932.1974664,PAWN:1965760547.7881074,QUEEN:513774015.0105381,ROOK:108576731.59556866},38:{BISHOP:1486402176.9965997,KING:1143304245.541566,KNIGHT:2124725956.1987987,PAWN:1167126526.134653,QUEEN:18461556.359367847,ROOK:242546837.98066235},39:{BISHOP:1882898430.6871233,KING:1576922695.4030175,KNIGHT:321080445.7815914,PAWN:383133104.0674095,QUEEN:1950623971.384882,ROOK:415529972.67407036},40:{BISHOP:1403943550.3603263,KING:1980553594.8046055,KNIGHT:1615010443.7630386,PAWN:266964531.29904127,QUEEN:538076319.4436016,ROOK:1954023095.0311255},41:{BISHOP:964269274.1551771,KING:531577253.3636861,KNIGHT:48335944.43122387,PAWN:685287275.1727333,QUEEN:1178528216.061277,ROOK:1337555778.7422657},42:{BISHOP:489227411.7959385,KING:1365952741.6541348,KNIGHT:1783511116.1079726,PAWN:1527188160.2805138,QUEEN:876384522.9197755,ROOK:1994863667.723401},43:{BISHOP:785814488.1022816,KING:2144266319.9952302,KNIGHT:1127078692.4182167,PAWN:427376459.20368195,QUEEN:1396360210.8597813,ROOK:740229836.725483},44:{BISHOP:2065561864.437509,KING:1898218828.2994714,KNIGHT:1239305607.8062973,PAWN:1262450151.5439835,QUEEN:1599455931.4139318,ROOK:821174345.1922975},45:{BISHOP:188366025.23370028,KING:1968556957.2327566,KNIGHT:559984062.1202927,PAWN:838662859.5758963,QUEEN:1092124323.0322747,ROOK:2025686544.6970854},46:{BISHOP:1283608810.3101983,KING:1098135018.5935397,KNIGHT:348869170.4780836,PAWN:1512935199.1465487,QUEEN:1815956037.71631,ROOK:12711789.634068012},47:{BISHOP:1772968202.6392322,KING:1155807323.067461,KNIGHT:983120175.6274042,PAWN:1913054232.9676013,QUEEN:1974863994.3276706,ROOK:84495365.45030594},48:{BISHOP:1170255722.9986353,KING:204955801.98936462,KNIGHT:1587762478.6620526,PAWN:2014138709.1976848,QUEEN:899154470.4225183,ROOK:1885364347.9147277},49:{BISHOP:1184531206.7715979,KING:180714104.49616718,KNIGHT:1474061623.0291257,PAWN:556159224.495153,QUEEN:1204588898.426753,ROOK:665690498.5572352},50:{BISHOP:2008591919.7006516,KING:1658437989.6007953,KNIGHT:589090156.9817061,PAWN:678355923.3422604,QUEEN:2064684000.7712684,ROOK:84850860.88187361},51:{BISHOP:1899964958.2597156,KING:2023112473.3093162,KNIGHT:1397132469.871993,PAWN:559139093.026833,QUEEN:1786904369.160265,ROOK:1221399814.2423954},52:{BISHOP:971717687.3107667,KING:385318095.63615036,KNIGHT:518401635.95681953,PAWN:1854238669.1580024,QUEEN:562760354.4298334,ROOK:809115358.2408848},53:{BISHOP:2135950557.7585588,KING:1650743898.112547,KNIGHT:1422091667.9313226,PAWN:1893898636.5448303,QUEEN:180793693.80759573,ROOK:369693144.35168743},54:{BISHOP:561688187.4140811,KING:1284092407.953793,KNIGHT:947336107.0320678,PAWN:2065463839.7715511,QUEEN:1697658956.7133884,ROOK:123948850.61726141},55:{BISHOP:1862223897.3441863,KING:1274636612.791831,KNIGHT:587356428.0345078,PAWN:1804423174.9244452,QUEEN:1821486152.238315,ROOK:1300220308.7750945},56:{BISHOP:526218621.3984456,KING:411693717.3390932,KNIGHT:829832301.2712526,PAWN:522444909.72053194,QUEEN:65830491.45085001,ROOK:1725801716.1422315},57:{BISHOP:373921510.94136906,KING:784164284.3237267,KNIGHT:220969067.74485016,PAWN:37078083.27369261,QUEEN:2142041569.3949666,ROOK:1066167172.1671433},58:{BISHOP:1119979269.7595668,KING:635130545.175797,KNIGHT:905722277.8036981,PAWN:1131936166.6297202,QUEEN:310932680.0278201,ROOK:1948875595.6786761},59:{BISHOP:1389334888.864674,KING:965519678.8305807,KNIGHT:1469684601.707718,PAWN:138217164.3126092,QUEEN:1037377220.8880806,ROOK:1110127343.5249057},60:{BISHOP:1899960349.508174,KING:1748497078.2793522,KNIGHT:443006726.8699093,PAWN:2060114961.2082686,QUEEN:778833565.5106735,ROOK:2079865182.740281},61:{BISHOP:371196807.4071827,KING:1272110924.084579,KNIGHT:1362684953.5790472,PAWN:2040087494.9022808,QUEEN:11121744.062980652,ROOK:1975192601.092013},62:{BISHOP:338402498.44623137,KING:1698279177.3207736,KNIGHT:1096153440.5620794,PAWN:1923167661.6050377,QUEEN:1792498354.2778196,ROOK:1519925637.8621435},63:{BISHOP:1784457396.1548977,KING:1049650972.6635232,KNIGHT:472316798.3067899,PAWN:367811788.33597755,QUEEN:1895676402.4305,ROOK:171979230.63984537}},BLACK:{0:{BISHOP:636761022.5744262,KING:2016526255.0442538,KNIGHT:269722267.6718888,PAWN:1391755125.6745095,QUEEN:1209747221.9744754,ROOK:875950429.7091169},1:{BISHOP:1646337340.1217475,KING:1332562226.9496536,KNIGHT:385564279.433496,PAWN:1549757451.5720062,QUEEN:178077568.4475317,ROOK:1226799679.7266488},2:{BISHOP:1991850602.4638066,KING:1434837716.2792144,KNIGHT:377944939.45466185,PAWN:21071492.52144575,QUEEN:170395963.87106943,ROOK:2062100707.0049715},3:{BISHOP:508127453.0659628,KING:570635917.2755399,KNIGHT:456436814.9915829,PAWN:1876151469.783537,QUEEN:1982433029.616136,ROOK:1820775146.9733162},4:{BISHOP:245400104.12385654,KING:1923861025.1068096,KNIGHT:1761262121.8890448,PAWN:262497067.90716743,QUEEN:1412235110.8991022,ROOK:344277662.1011658},5:{BISHOP:2060704116.9552264,KING:418428909.2977047,KNIGHT:1767576854.9397764,PAWN:1802806325.7440796,QUEEN:1401568163.2933211,ROOK:284077648.1263938},6:{BISHOP:897595117.7852373,KING:855958060.8313036,KNIGHT:1419436708.2359972,PAWN:1040885427.1608238,QUEEN:1495773543.435553,ROOK:598209161.084682},7:{BISHOP:569589686.900423,KING:739441500.5485611,KNIGHT:697446216.9056807,PAWN:1588600502.381116,QUEEN:1024144020.3220496,ROOK:1866929945.9690828},8:{BISHOP:1995386953.275298,KING:2074598852.1247058,KNIGHT:1615779802.0487342,PAWN:386927385.94570637,QUEEN:1476643934.727881,ROOK:536807585.8508444},9:{BISHOP:874980583.7169151,KING:359399293.4045057,KNIGHT:1780645782.8648887,PAWN:738187177.4250789,QUEEN:236181663.6118245,ROOK:2125459126.530867},10:{BISHOP:1898872386.254777,KING:1680016037.202361,KNIGHT:578073198.9512963,PAWN:1904770415.7494664,QUEEN:1468144392.9921236,ROOK:1745819804.0424166},11:{BISHOP:489790789.4726882,KING:1586655319.3500695,KNIGHT:758585821.1627512,PAWN:985628050.2045212,QUEEN:1486977438.3209867,ROOK:922617001.7515178},12:{BISHOP:1287530565.7608128,KING:56226034.2021842,KNIGHT:1193128721.9554543,PAWN:658878150.014132,QUEEN:314394597.79229975,ROOK:1160898785.5711432},13:{BISHOP:1281047607.68533,KING:360564792.1804285,KNIGHT:1987635038.736321,PAWN:503307261.95913744,QUEEN:1886081335.846445,ROOK:1475316852.9624147},14:{BISHOP:547844622.2791929,KING:446771931.8278518,KNIGHT:907699224.2205133,PAWN:1073088038.6037202,QUEEN:1527679141.7728996,ROOK:1240096602.1475735},15:{BISHOP:1050894168.5586476,KING:1605900369.8839102,KNIGHT:1426838120.130065,PAWN:1006145122.5879235,QUEEN:2145001762.3225818,ROOK:462787007.4305706},16:{BISHOP:1979558179.3919559,KING:1066369187.8090539,KNIGHT:374822328.29178,PAWN:1227416001.8759823,QUEEN:840518618.8032241,ROOK:1939598609.3318667},17:{BISHOP:343356587.91951704,KING:581400202.5907211,KNIGHT:2129283472.453638,PAWN:669457655.328547,QUEEN:1819254122.7725983,ROOK:1280871951.6262908},18:{BISHOP:798574367.3614635,KING:217194718.4050336,KNIGHT:1230361556.4894295,PAWN:721331422.6988854,QUEEN:632272780.0386152,ROOK:1124653720.7016115},19:{BISHOP:120745923.1655755,KING:131445895.8682785,KNIGHT:610849353.1174769,PAWN:2016993719.0436606,QUEEN:1230646314.079647,ROOK:244111487.85977936},20:{BISHOP:1866866513.1311316,KING:551593346.330637,KNIGHT:1289761030.5521255,PAWN:1877057287.7596912,QUEEN:1610259926.206715,ROOK:222985235.34776735},21:{BISHOP:401790602.5165429,KING:1161146559.1022792,KNIGHT:567050726.0922432,PAWN:1015202224.9668765,QUEEN:1006486861.4027004,ROOK:2132002288.8496928},22:{BISHOP:1542293054.02847,KING:1587252980.7958775,KNIGHT:1220319643.5826411,PAWN:806287436.3272743,QUEEN:266049006.8264289,ROOK:442941003.4046631},23:{BISHOP:1312746935.029687,KING:1906545739.9681864,KNIGHT:135192175.15406036,PAWN:250840302.7417636,QUEEN:149822492.15056992,ROOK:175591448.83434725},24:{BISHOP:2088229885.863974,KING:1435183175.0905986,KNIGHT:992499749.6620927,PAWN:746505349.7305822,QUEEN:837317453.4913421,ROOK:672166763.0530515},25:{BISHOP:1574959240.3121443,KING:393524421.46111536,KNIGHT:1695500639.2822342,PAWN:561637286.016696,QUEEN:1023295985.0687628,ROOK:558270585.5088158},26:{BISHOP:1289096354.8656,KING:802060420.7405553,KNIGHT:819717031.5285039,PAWN:236768546.0730443,QUEEN:1872080546.6454854,ROOK:994736053.5245638},27:{BISHOP:52468655.99538708,KING:1973527707.5885224,KNIGHT:225023735.81697416,PAWN:1684240441.3395443,QUEEN:1269753157.283175,ROOK:729283849.4567719},28:{BISHOP:547673472.9843035,KING:1949526015.752276,KNIGHT:509438357.58550215,PAWN:275233780.07423925,QUEEN:451300649.7233982,ROOK:392340539.7761116},29:{BISHOP:1719353815.9974976,KING:686863027.8237238,KNIGHT:1801849163.8583183,PAWN:621151181.1296964,QUEEN:445671081.8772912,ROOK:1405210328.685194},30:{BISHOP:1585944879.6725426,KING:111686423.86237574,KNIGHT:1713486972.1111546,PAWN:1841495322.587957,QUEEN:677716039.0499506,ROOK:2145074292.9747295},31:{BISHOP:395987840.28504753,KING:1200914783.6699996,KNIGHT:1800904666.451476,PAWN:1023121704.9496193,QUEEN:1234563132.4520593,ROOK:204886514.68756866},32:{BISHOP:2133356917.0933352,KING:383976139.9774127,KNIGHT:1847179535.648386,PAWN:753368488.2341928,QUEEN:650738376.4345427,ROOK:1302566799.1061382},33:{BISHOP:940603558.9580159,KING:468791516.52261734,KNIGHT:1589205498.6875138,PAWN:234619025.4085393,QUEEN:1166084397.5349698,ROOK:5503632.365936279},34:{BISHOP:567055816.2364688,KING:144480594.03048086,KNIGHT:250135887.44425917,PAWN:99472647.19952774,QUEEN:1720773339.1718464,ROOK:227277021.92940187},35:{BISHOP:2132554536.055317,KING:675110581.3333764,KNIGHT:456381592.14509916,PAWN:2012273801.9867902,QUEEN:2025521960.9393697,ROOK:1497853100.0992646},36:{BISHOP:878657579.2753682,KING:1555904611.290112,KNIGHT:673152385.9780784,PAWN:604310945.3081694,QUEEN:235920644.16928482,ROOK:1193873370.2796164},37:{BISHOP:770367945.5944695,KING:363504894.82420397,KNIGHT:911925532.2087417,PAWN:371780203.6933131,QUEEN:2052281012.2600703,ROOK:1823640577.5704036},38:{BISHOP:2047965401.88028,KING:1287797428.7638283,KNIGHT:1938084746.6839175,PAWN:648495923.7633572,QUEEN:1108747566.4189162,ROOK:1925828396.9422445},39:{BISHOP:2077397910.10455,KING:1570069161.1094513,KNIGHT:1265733850.424158,PAWN:1133330346.828086,QUEEN:136224513.76721525,ROOK:1121969170.5967236},40:{BISHOP:1678077789.5327525,KING:55774027.074811935,KNIGHT:111098819.57362318,PAWN:1859539414.2061682,QUEEN:1410937208.628397,ROOK:860848147.0077453},41:{BISHOP:1217639263.540575,KING:759134381.7770419,KNIGHT:1348221547.880959,PAWN:925415060.5921311,QUEEN:1878823441.0638838,ROOK:1528586247.5657024},42:{BISHOP:365075763.33277225,KING:684609458.0128989,KNIGHT:333609053.8648777,PAWN:1508337861.5879736,QUEEN:1630260566.366969,ROOK:297918802.10427046},43:{BISHOP:1248597365.0469055,KING:1318992426.4053888,KNIGHT:1668859343.0852346,PAWN:881539378.8579173,QUEEN:64785064.37004471,ROOK:2137536656.496601},44:{BISHOP:2090383616.3453822,KING:778047323.1293693,KNIGHT:201527229.9653492,PAWN:1724742281.3626513,QUEEN:1182516825.4181538,ROOK:1889263520.3550787},45:{BISHOP:811559181.495471,KING:265876382.22184324,KNIGHT:588783929.2472048,PAWN:930722359.4489431,QUEEN:203256112.97583008,ROOK:1388725203.2704282},46:{BISHOP:1306011174.0252604,KING:90296884.9978137,KNIGHT:1439005242.9739518,PAWN:1700589419.9408913,QUEEN:2094478488.6150393,ROOK:767823208.623848},47:{BISHOP:253521852.12105703,KING:749949980.8371472,KNIGHT:1725425290.9437547,PAWN:1871564619.8230271,QUEEN:1016446315.6215854,ROOK:1233620021.2487664},48:{BISHOP:690736312.4514003,KING:293965282.32803917,KNIGHT:1755575456.10674,PAWN:1943821589.9538836,QUEEN:602618737.1611142,ROOK:1884296000.8075318},49:{BISHOP:968351188.1004682,KING:7072403.093779564,KNIGHT:178684006.95836782,PAWN:1625977044.3056417,QUEEN:2017246244.8787127,ROOK:1452503196.5444365},50:{BISHOP:1183113936.3376818,KING:1509251731.7715077,KNIGHT:301800989.0989361,PAWN:642124252.6125889,QUEEN:1139501288.6280818,ROOK:141111259.53503895},51:{BISHOP:607232991.4043326,KING:939006775.2539392,KNIGHT:486060574.3829074,PAWN:292438900.86718273,QUEEN:958253673.0878234,ROOK:1485049057.9341364},52:{BISHOP:1097510721.9011555,KING:1121313718.4632854,KNIGHT:1169934988.0353913,PAWN:1138073481.4664636,QUEEN:326650952.1891227,ROOK:2054822452.5630045},53:{BISHOP:161905857.28216934,KING:1434261581.2599893,KNIGHT:120286647.87619781,PAWN:1646470496.917776,QUEEN:418214651.7893276,ROOK:1842424622.2441964},54:{BISHOP:1268497277.3112845,KING:1171256519.0427132,KNIGHT:1742797267.4116611,PAWN:142017364.6884551,QUEEN:937799856.8944697,ROOK:1671934136.414935},55:{BISHOP:1511059740.6473136,KING:2056027782.4620337,KNIGHT:187136599.46794462,PAWN:609260715.966085,QUEEN:395015537.9730296,ROOK:1992662666.2375097},56:{BISHOP:1235055185.6535969,KING:1281821670.499771,KNIGHT:1633172937.2677784,PAWN:869299005.8697381,QUEEN:906728393.0308976,ROOK:1450586791.3579311},57:{BISHOP:720757397.0660343,KING:2022076168.0430126,KNIGHT:1913304384.9458609,PAWN:1350655412.1055493,QUEEN:602826754.7935071,ROOK:1121628259.4198122},58:{BISHOP:411003378.5898771,KING:1033999822.0342112,KNIGHT:236268375.59196568,PAWN:1876842168.8355093,QUEEN:426022897.37386703,ROOK:1499408223.795816},59:{BISHOP:279247521.24542284,KING:550129874.3879952,KNIGHT:1965967498.5076528,PAWN:2036581721.0622535,QUEEN:1513292972.9887471,ROOK:2055109298.3645926},60:{BISHOP:375827820.341897,KING:1955866673.0999112,KNIGHT:222918111.46685457,PAWN:1412147035.927928,QUEEN:2118575438.2820868,ROOK:1750530436.4662695},61:{BISHOP:222776118.68252325,KING:1223267675.9381523,KNIGHT:22228361.98294449,PAWN:1428790841.1485047,QUEEN:1796210558.9172025,ROOK:1087485693.935812},62:{BISHOP:1394211825.5598006,KING:1563356061.802227,KNIGHT:1636129503.3929973,PAWN:442983757.5999222,QUEEN:1334177896.8120742,ROOK:1779533951.900138},63:{BISHOP:1751469979.8839526,KING:1678593228.9495249,KNIGHT:450433278.93033075,PAWN:1830568345.419581,QUEEN:253379825.74360418,ROOK:1143856204.3430219}}},CASTLING_AVAILABILITY:{WHITE:{kingside:1445686586.225099,queenside:1917310400.511158},BLACK:{kingside:1228437978.6626902,queenside:1607134665.416885}}};var oe,re;(re=oe||(oe={})).Turn="TURN",re.PieceSquare="PIECE_SQUARE",re.CastlingAvailability="CASTLING_AVAILABILITY";const Ke=(e,t)=>{let N=0;e.turn===s.Il.Black&&(N^=t[oe.Turn]);for(const[a,s]of e.pieces)N^=t[oe.PieceSquare][s.color][a][s.type];return e.castlingAvailability[s.Il.White].kingside&&(N^=t[oe.CastlingAvailability][s.Il.White].kingside),e.castlingAvailability[s.Il.White].queenside&&(N^=t[oe.CastlingAvailability][s.Il.White].queenside),e.castlingAvailability[s.Il.Black].kingside&&(N^=t[oe.CastlingAvailability][s.Il.White].kingside),e.castlingAvailability[s.Il.Black].queenside&&(N^=t[oe.CastlingAvailability][s.Il.Black].queenside),N};class Oe{constructor(e,t){this._zobristNumbers=t,this._hash=Ke(e,this._zobristNumbers)}get hash(){return this._hash}set hash(e){this._hash="number"==typeof e?e:Ke(e,this._zobristNumbers)}updateSquareOccupancy(e,t){this._hash^=this._zobristNumbers[oe.PieceSquare][t.color][e][t.type]}updateTurn(){this._hash^=this._zobristNumbers[oe.Turn]}updateCastling(e,t){this._hash^=this._zobristNumbers[oe.CastlingAvailability][e][t]}}class ne{constructor(e){this._hashX=new Oe(e,ie),this._hashY=new Oe(e,Ie)}set key(e){this._hashX.hash=e[0],this._hashY.hash=e[1]}get key(){return[this._hashX.hash,this._hashY.hash]}updateSquareOccupancy(e,t){this._hashX.updateSquareOccupancy(e,t),this._hashY.updateSquareOccupancy(e,t)}updateTurn(){this._hashX.updateTurn(),this._hashY.updateTurn()}updateCastling(e,t){this._hashX.updateCastling(e,t),this._hashY.updateCastling(e,t)}}const ce=e=>e.map((e=>100*e)),Pe=[[0,0,0,2,2,0,0,0],[1,1,2,2,2,2,1,1],[1,2,3,3,3,3,2,1],[1,6,4,4,4,4,6,1],[1,1,7,4,4,7,1,1],[1,1,1,8,8,1,1,1],[2,8,0,7,7,0,8,2],[0,1,0,0,0,0,1,0]].map(ce),le=[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[1,1,1,0,0,1,1,1],[8,8,9,0,0,4,9,8]].map(ce),Ee=[[0,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,0],[1,2,4,6,6,4,2,1],[2,4,6,7,7,6,4,2],[2,4,6,7,7,6,4,2],[1,2,9,5,5,9,2,1],[1,1,1,7,7,1,1,1],[0,0,1,1,1,1,0,0]].map(ce),Ge=[[0,0,0,0,0,0,0,0],[9,9,9,9,9,9,9,9],[6,1,6,7,7,6,1,6],[5,1,5,8,8,5,1,5],[5,1,6,9,9,3,1,5],[3,6,4,3,3,2,6,3],[2,2,2,0,0,8,2,2],[0,0,0,0,0,0,0,0]].map(ce),He=[[0,1,2,3,3,2,1,0],[1,2,3,5,5,3,2,1],[2,3,5,7,7,5,3,2],[3,5,7,9,9,7,5,3],[3,5,7,9,9,7,6,3],[2,7,5,7,7,7,3,2],[1,2,7,5,7,1,2,1],[0,1,2,3,3,2,1,0]].map(ce),ue=[[3,3,3,3,3,3,3,3],[8,8,9,9,9,9,8,8],[0,3,2,2,2,2,3,0],[1,3,2,1,1,2,3,1],[1,3,2,1,1,2,3,1],[4,3,2,4,2,4,3,4],[0,0,3,1,1,3,0,0],[1,0,2,3,3,2,0,1]].map(ce),pe={[s.WA.Bishop]:{[s.Il.White]:[...Pe].reverse().flat(),[s.Il.Black]:[...Pe].flat()},[s.WA.Knight]:{[s.Il.White]:[...Ee].reverse().flat(),[s.Il.Black]:[...Ee].flat()},[s.WA.King]:{[s.Il.White]:[...le].reverse().flat(),[s.Il.Black]:[...le].flat()},[s.WA.Pawn]:{[s.Il.White]:[...Ge].reverse().flat(),[s.Il.Black]:[...Ge].flat()},[s.WA.Queen]:{[s.Il.White]:[...He].reverse().flat(),[s.Il.Black]:[...He].flat()},[s.WA.Rook]:{[s.Il.White]:[...ue].reverse().flat(),[s.Il.Black]:[...ue].flat()}},Ae=(e,t)=>pe[t.type][t.color][e],We=Object.freeze({[s.WA.Bishop]:3e3,[s.WA.King]:1/0,[s.WA.Knight]:3e3,[s.WA.Pawn]:1e3,[s.WA.Queen]:9e3,[s.WA.Rook]:5e3}),Se=(We[s.WA.Queen],e=>e===s.Il.White?1:-1),he=(e,t,N)=>{const a=new Map,i=k[t];for(const{type:t,ray:I}of i){const i=[],o=[];let r;for(const t of I){const a=e.get(t);if(a){if(a.color!==N){r={square:t,piece:a};break}i.push(t)}else o.push(t)}!r||r.piece.type!==t&&r.piece.type!==s.WA.Queen||1===i.length&&a.set(i[0],{pinned:i[0],attacker:r.square,legalMoveSquares:[...o,...i]})}return a},Be=(e,t,{ignoreKing:N})=>{if(N&&t.piece.type===s.WA.King)return!0;if(1===e.length){const N=e[0];return(0,i.rz)(N.slideSquares,t.to)||N.attacker.square===t.to}if(2===e.length)return!1;throw Error(`called with ${e.length} not exactly 1 or 2 checks`)},Re=(e,t,N,a,s,I,o)=>{if(!I&&o){if(a.from===N)return!o?.isAttacked(a.to);{const e=s.get(a.from);return!e||e.legalMoveSquares.includes(a.to)||a.to===e.attacker}}if(a.from===N)return 0===Ne(e,(0,i.P$)(t),a.to,{enPassantSquare:null,skip:[N]}).length;{const e=s.get(a.from);return!e||e.legalMoveSquares.includes(a.to)||a.to===e.attacker}},Te=e=>(e=>{const t=(0,i.YB)(e,s.Il.White),N=(0,i.YB)(e,s.Il.Black),a={[s.Il.White]:t,[s.Il.Black]:N},I={[s.Il.White]:new Y(e,s.Il.White),[s.Il.Black]:new Y(e,s.Il.Black)},o=((e,t)=>{const N=t[s.Il.White],a=t[s.Il.Black];let i,I;return N&&(i=he(e,N,s.Il.White)),a&&(I=he(e,a,s.Il.Black)),{[s.Il.White]:i||new Map,[s.Il.Black]:I||new Map}})(e.pieces,a),r=se(e.pieces,a,{enPassantSquare:e.enPassantSquare,castlingAvailability:e.castlingAvailability});return{...e,kings:a,attackedSquares:I,checks:r,pinsToKing:o}})((0,i.rP)(e));class Qe{constructor(e=(0,a.S3)(a.A4)){this._moveStack=[],this._position=Te(e),this._currentZobrist=new ne(e)}applyMove(e){const t=((e,t,N)=>{const{pieces:a}=e;let I=e.pieces.get(t.from);if(!I)throw Error("no piece to move");if(I.color!==e.turn)throw Error("cannot move piece for other color");const o={move:t,previousState:{castlingAvailability:{[s.Il.White]:{kingside:e.castlingAvailability[s.Il.White].kingside,queenside:e.castlingAvailability[s.Il.White].queenside},[s.Il.Black]:{kingside:e.castlingAvailability[s.Il.Black].kingside,queenside:e.castlingAvailability[s.Il.Black].queenside}},enPassantSquare:e.enPassantSquare,halfMoveCount:e.halfMoveCount,pinsToKing:{...e.pinsToKing},checks:{...e.checks},zobrist:N.key}};t.promotion&&(I={...I,type:t.promotion});let r=a.get(t.to);if(r&&(o.captured={square:t.to,piece:r}),a.delete(t.from),a.set(t.to,I),N.updateSquareOccupancy(t.from,I),N.updateSquareOccupancy(t.to,I),r&&r.type===s.WA.Rook&&(t.to===i.CP[r.color].queenside?e.castlingAvailability[r.color].queenside=!1:t.to===i.CP[r.color].kingside&&(e.castlingAvailability[r.color].kingside=!1)),I.type===s.WA.Pawn&&e.enPassantSquare===t.to){const e=I.color===s.Il.White?M(t.to):C(t.to);if(r=a.get(e),!r)throw Error("no piece captured with en passant capture");o.captured={square:e,piece:r},a.delete(e)}if(((e,t)=>!(e.type!==s.WA.Pawn||!(0,i.UW)(e.color,t.from))&&(e.color===s.Il.White?t.to>=24&&t.to<32:t.to>=32&&t.to<40))(I,t)?e.enPassantSquare=I.color===s.Il.White?C(t.from):M(t.from):e.enPassantSquare=null,I.type===s.WA.King)if(e.kings[I.color]=t.to,e.castlingAvailability[I.color].queenside&&(N.updateCastling(I.color,"queenside"),e.castlingAvailability[I.color].queenside=!1),e.castlingAvailability[I.color].kingside&&(N.updateCastling(I.color,"kingside"),e.castlingAvailability[I.color].kingside=!1),t.from-t.to==2){const t={color:I.color,type:s.WA.Rook},a=i.CP[I.color].queenside,o=I.color===s.Il.White?3:59;e.pieces.delete(a),e.pieces.set(o,t),N.updateSquareOccupancy(a,t),N.updateSquareOccupancy(o,t)}else if(t.from-t.to==-2){const t={color:I.color,type:s.WA.Rook},a=i.CP[I.color].kingside,o=I.color===s.Il.White?5:61;e.pieces.delete(a),e.pieces.set(o,t),N.updateSquareOccupancy(a,t),N.updateSquareOccupancy(o,t)}return I.type===s.WA.Rook&&(t.from===i.CP[I.color].queenside?e.castlingAvailability[I.color].queenside&&(N.updateCastling(I.color,"queenside"),e.castlingAvailability[I.color].queenside=!1):t.from===i.CP[I.color].kingside&&e.castlingAvailability[I.color].kingside&&(N.updateCastling(I.color,"kingside"),e.castlingAvailability[I.color].kingside=!1)),((e,t,N,a,I,o)=>{const r=N[a],K=N[(0,i.P$)(a)];r&&(o.type===s.WA.King||_[r][I.from]||_[r][I.to])&&(e[a]=he(t,r,a)),K&&(o.type===s.WA.King||_[K][I.from]||_[K][I.to])&&(e[(0,i.P$)(a)]=he(t,K,(0,i.P$)(a)))})(e.pinsToKing,e.pieces,e.kings,e.turn,t,I),((e,t,N,a,I)=>{e[s.Il.White].startChangeset(),e[s.Il.Black].startChangeset();const o=(0,i.P$)(a.color);e[a.color].removeAttacksForPiece(N.from),e[a.color].removeAttacksForPiece(N.to),e[o].removeAttacksForPiece(N.to);const r=j(a,t,N.to);e[a.color].addAttacksForPiece(N.to,r);for(const[a,s]of t){if(a===N.from||a===N.to||!(0,i.tm)(s.type))continue;const o=ae(s,a,N.from),r=ae(s,a,N.to);if(o&&r&&(0,i.zQ)(a,N.to)===(0,i.zQ)(a,N.from)){const o=(0,i.zQ)(a,N.from),r=w[s.type][a][o];if(o===(0,i.zQ)(N.from,N.to)){const i=D(t,{square:a,piece:s},r,N.from);e[s.color].addAttacks(a,i)}else{if(I)continue;const i=D(t,{square:a,piece:s},r,N.to,N.from);e[s.color].removeAttacks(a,i)}}else{if(o){const I=(0,i.zQ)(a,N.from),o=w[s.type][a][I],r=D(t,{square:a,piece:s},o,N.from);e[s.color].addAttacks(a,r)}if(!I&&r){const I=(0,i.zQ)(a,N.to),o=w[s.type][a][I],r=D(t,{square:a,piece:s},o,N.to);e[s.color].removeAttacks(a,r)}}}})(e.attackedSquares,e.pieces,t,I,void 0!==o.captured),o.captured&&N.updateSquareOccupancy(o.captured.square,o.captured.piece),N.updateTurn(),e.turn===s.Il.Black&&e.fullMoveCount++,I.type===s.WA.Pawn||r?e.halfMoveCount=0:e.halfMoveCount++,e.turn=(0,i.P$)(e.turn),o})(this._position,e,this._currentZobrist);return this._moveStack.push(t),t.captured?.piece}undoLastMove(){const e=this._moveStack.pop();if(!e)throw Error("no last move to undo");((e,t,N)=>{const{move:a}=t;let I=e.pieces.get(a.to);if(!I)throw Error("no piece to unmove");if(a.promotion&&(I={type:s.WA.Pawn,color:I.color}),e.pieces.set(a.from,I),e.pieces.delete(a.to),t.captured&&e.pieces.set(t.captured.square,t.captured.piece),I.type===s.WA.King)if(e.kings[I.color]=a.from,a.from-a.to==2){const t=i.CP[I.color].queenside,N=I.color===s.Il.White?3:59;e.pieces.delete(N),e.pieces.set(t,{color:I.color,type:s.WA.Rook})}else if(a.from-a.to==-2){const t=i.CP[I.color].kingside,N=I.color===s.Il.White?5:61;e.pieces.delete(N),e.pieces.set(t,{color:I.color,type:s.WA.Rook})}e.attackedSquares[s.Il.White].undoChangeset(),e.attackedSquares[s.Il.Black].undoChangeset(),t.previousState.zobrist&&(N.key=t.previousState.zobrist),e.turn===s.Il.White&&e.fullMoveCount--,e.turn=(0,i.P$)(e.turn),e.castlingAvailability=t.previousState.castlingAvailability,e.enPassantSquare=t.previousState.enPassantSquare,e.halfMoveCount=t.previousState.halfMoveCount,e.pinsToKing=t.previousState.pinsToKing,e.checks=t.previousState.checks})(this._position,e,this._currentZobrist)}evaluate(){return(e=>{let t=0;const N={[s.Il.White]:[0,0,0,0,0,0,0,0],[s.Il.Black]:[0,0,0,0,0,0,0,0]};for(const[a,I]of e.pieces)I.type!==s.WA.King&&(I.type===s.WA.Pawn&&N[I.color][(0,i.r3)(a)]++,t+=(We[I.type]+Ae(a,I))*Se(I.color));for(let e=0;e<8;e++)N[s.Il.White][e]>1&&(t-=100),N[s.Il.Black][e]>1&&(t+=100);return t+=200*Se(e.turn),t})(this._position)}evaluateNormalized(){return this._position.turn===s.Il.White?this.evaluate():-1*this.evaluate()}generateMoves(){return((e,t,{attackedSquares:N,pinsToKing:a,kings:I,enPassantSquare:o,castlingAvailability:r})=>{let K=[];const O=I[t];let n;if(O&&(K=Ne(e,(0,i.P$)(t),O,{enPassantSquare:o,skip:[O]})),n=((e,t)=>{const N=[],{color:a,enPassantSquare:i,castlingAvailability:I,attackedSquares:o}=t;for(const[t,r]of e){if(a&&r.color!==a)continue;const K=o[r.color].controlForPiece(t);for(const I of K){const o=e.get(I.square);o&&o.color===a||(r.type!==s.WA.Pawn||o||I.square===i)&&N.push({from:I.attacker.square,to:I.square,piece:r,attack:o?{attacked:{square:I.square,type:o.type},attacker:{square:t,type:r.type},slideSquares:I.slideSquares}:void 0})}r.type===s.WA.King?N.push(...J(e,r.color,t,{castlingOnly:!0,castlingAvailability:I})):r.type===s.WA.Pawn&&N.push(...X(e,r.color,t,{attacksOnly:!1,advanceOnly:!0,enPassantSquare:i}))}return N})(e,{color:t,enPassantSquare:o,castlingAvailability:K.length>0?i.oW:r,attackedSquares:N}),O)for(let s=n.length-1;s>=0;s--){const I=n[s];K.length>0&&!Be(K,I,{ignoreKing:!0})?n.splice(s,1):Re(e,t,O,I,a[t],K.length>0,N[(0,i.P$)(t)])||n.splice(s,1)}return n})(this._position.pieces,this._position.turn,{attackedSquares:this._position.attackedSquares,pinsToKing:this._position.pinsToKing,checks:this._position.checks,kings:this._position.kings,enPassantSquare:this._position.enPassantSquare,castlingAvailability:this._position.castlingAvailability})}generateAttackingMoves(){return this.generateMoves().filter((e=>e.attack))}get position(){return e=this._position,(0,i.rP)((e=>{const{pieces:t,turn:N,castlingAvailability:a,enPassantSquare:s,halfMoveCount:i,fullMoveCount:I}=e;return{pieces:t,turn:N,castlingAvailability:a,enPassantSquare:s,halfMoveCount:i,fullMoveCount:I}})(e));var e}set position(e){this._position=Te(e),this._currentZobrist=new ne(e),this._moveStack=[]}get zobrist(){return this._currentZobrist.key}get checks(){return se(this._position.pieces,this._position.kings,{enPassantSquare:this._position.enPassantSquare,castlingAvailability:this._position.castlingAvailability})}get attacks(){return this._position.attackedSquares}get pins(){return[...Array.from(this._position.pinsToKing[s.Il.White].values()),...Array.from(this._position.pinsToKing[s.Il.Black].values())]}}},824:(e,t,N)=>{N.d(t,{A4:()=>i,rC:()=>I,nb:()=>o,_B:()=>r,LR:()=>K,S3:()=>n});var a=N(7),s=N(165);const i="8/8/8/8/8/8/8/8 w - - 0 1",I="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",o="rnbq1k1r/pp1Pbppp/2p5/8/2B5/8/PPP1NnPP/RNBQK2R w KQ - 1 8",r="rnbqkb1r/pppp1ppp/5n2/4p3/2B1P3/2N5/PPPP1PPP/R1BQK1NR/ b KQkQ - 3 3",K="4k3/5p1p/6rp/2N1p3/2RnP1r1/1P5P/P4R2/7K b - - 0 24",O=e=>{const t=new Map;let N=7,i=0;for(const o of e)switch(o){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":i+=Number(o);break;case"/":N-=1,i=0;break;case"b":case"B":case"k":case"K":case"n":case"N":case"p":case"P":case"q":case"Q":case"r":case"R":t.set((0,s.Z4)({rank:N,file:i}),{color:(I=o,"PNBRQK".includes(I)?a.Il.White:a.Il.Black),type:s.cw[o]}),i+=1}var I;return t},n=e=>{const[t,N,i,I,o,r]=e.split(" ");return Object.freeze({pieces:O(t),turn:"w"===N?a.Il.White:a.Il.Black,castlingAvailability:Object.freeze({[a.Il.White]:{kingside:i.includes("K"),queenside:i.includes("Q")},[a.Il.Black]:{kingside:i.includes("k"),queenside:i.includes("q")}}),enPassantSquare:"-"!==I?(0,s.Mg)(I):null,halfMoveCount:Number(o),fullMoveCount:Number(r)})}},644:(e,t,N)=>{N.d(t,{Gn:()=>I});var a=N(824),s=(N(392),N(165));new Intl.NumberFormat,a.nb,a.rC,a._B,a.LR;const i=(e,t)=>{const N=e.generateMoves();if(0===t)return 1;if(1===t)return N.length;let a=0;for(const s of N)e.applyMove(s),a+=i(e,t-1),e.undoLastMove();return a},I=(e,t)=>{if(0===t)return{counter:1,counts:{}};const N={},a=e.generateMoves();for(const I of a)e.applyMove(I),N[(0,s.q5)(I,"")]=i(e,t-1),e.undoLastMove();return{counter:Object.values(N).reduce(((e,t)=>e+t),0),counts:N}}},581:(e,t,N)=>{N.a(e,(async e=>{var t=N(644),a=N(282),s=N(824),i=N(392),I=N(165),o=N(292);const r=await(0,o.open)("/tmp/perft-debug","a"),[,,K,O,n]=a.argv;r.write("PERFT CALL ===================\n"),r.write(`args ${K} ${O} ${n}\n`);const c=(0,s.S3)(O),P=0===n.length?[]:n.split(" ").map((e=>(0,I.Kf)(e)));r.write(`parsed moves: ${P.join("-")}\n`);const l=new i.Z(c);for(const e of P)l.applyMove(e);const E=(0,t.Gn)(l,Number(K));for(const[e,t]of Object.entries(E.counts))console.log(`${e} ${t}`);console.log(`\n${E.counter}`),r.close(),e()}),1)},7:(e,t,N)=>{var a,s,i;N.d(t,{Il:()=>a,WA:()=>s,TW:()=>i}),function(e){e.White="WHITE",e.Black="BLACK"}(a||(a={})),function(e){e.Bishop="BISHOP",e.King="KING",e.Knight="KNIGHT",e.Pawn="PAWN",e.Queen="QUEEN",e.Rook="ROOK"}(s||(s={})),function(e){e[e.Up=8]="Up",e[e.Right=1]="Right",e[e.Down=-8]="Down",e[e.Left=-1]="Left",e[e.UpLeft=7]="UpLeft",e[e.UpRight=9]="UpRight",e[e.DownLeft=-9]="DownLeft",e[e.DownRight=-7]="DownRight"}(i||(i={}))},165:(e,t,N)=>{N.d(t,{CP:()=>s,oW:()=>i,cw:()=>I,Z4:()=>K,r3:()=>O,Mg:()=>c,Qg:()=>P,tm:()=>l,rz:()=>E,ey:()=>G,P$:()=>H,zQ:()=>u,q5:()=>p,Kf:()=>A,UW:()=>W,gi:()=>S,YB:()=>h,rP:()=>B});var a=N(7);const s=Object.freeze({[a.Il.White]:{queenside:0,kingside:7},[a.Il.Black]:{queenside:56,kingside:63}}),i=Object.freeze({[a.Il.White]:{kingside:!1,queenside:!1},[a.Il.Black]:{kingside:!1,queenside:!1}}),I=Object.freeze({b:a.WA.Bishop,B:a.WA.Bishop,k:a.WA.King,K:a.WA.King,n:a.WA.Knight,N:a.WA.Knight,p:a.WA.Pawn,P:a.WA.Pawn,q:a.WA.Queen,Q:a.WA.Queen,r:a.WA.Rook,R:a.WA.Rook}),o=Object.freeze({[a.WA.Bishop]:"b",[a.WA.King]:"k",[a.WA.Knight]:"n",[a.WA.Pawn]:"p",[a.WA.Queen]:"q",[a.WA.Rook]:"r"}),r=[["a8","b8","c8","d8","e8","f8","g8","h8"],["a7","b7","c7","d7","e7","f7","g7","h7"],["a6","b6","c6","d6","e6","f6","g6","h6"],["a5","b5","c5","d5","e5","f5","g5","h5"],["a4","b4","c4","d4","e4","f4","g4","h4"],["a3","b3","c3","d3","e3","f3","g3","h3"],["a2","b2","c2","d2","e2","f2","g2","h2"],["a1","b1","c1","d1","e1","f1","g1","h1"]].reverse().flat(),K=({rank:e,file:t})=>8*e+t,O=e=>e%8,n=e=>r[e],c=e=>r.indexOf(e),P=function*(){for(let e=0;e<8;e++)for(let t=0;t<8;t++)yield{rank:e,file:t}},l=e=>e===a.WA.Bishop||e===a.WA.Queen||e===a.WA.Rook,E=(e,t)=>e.includes(t),G=e=>e>=0&&e<64,H=e=>e===a.Il.White?a.Il.Black:a.Il.White,u=(e,t)=>{const N=t-e,s=O(e);return 0===e&&63===t?a.TW.UpRight:N>0?N%a.TW.Up==0?a.TW.Up:N%a.TW.UpLeft==0?0===s?a.TW.Right:a.TW.UpLeft:N%a.TW.UpRight==0?a.TW.UpRight:a.TW.Right:N%a.TW.Down==0?a.TW.Down:N%a.TW.DownLeft==0?a.TW.DownLeft:N%a.TW.DownRight==0?7===s?a.TW.Left:a.TW.DownRight:a.TW.Left},p=(e,t="")=>{return e.promotion?`${n(e.from)}${t}${n(e.to)}${N=e.promotion,o[N]}`:`${n(e.from)}${t}${n(e.to)}`;var N},A=e=>{const t=e.slice(0,2),N=e.slice(2,4),a=e.slice(4,5),s={from:c(t),to:c(N)};return a.length>0&&(s.promotion=I[a]),s},W=(e,t)=>e===a.Il.White?t>=8&&t<16:t>=48&&t<56,S=(e,t)=>W(H(e),t),h=(e,t)=>{for(const[N,s]of e.pieces)if(s.type===a.WA.King&&s.color===t)return N},B=e=>{const t=new Map;for(const[N,a]of e.pieces)t.set(N,a);const N={[a.Il.White]:{kingside:e.castlingAvailability[a.Il.White].kingside,queenside:e.castlingAvailability[a.Il.White].queenside},[a.Il.Black]:{kingside:e.castlingAvailability[a.Il.Black].kingside,queenside:e.castlingAvailability[a.Il.Black].queenside}};return{pieces:t,turn:e.turn,castlingAvailability:N,enPassantSquare:e.enPassantSquare,halfMoveCount:e.halfMoveCount,fullMoveCount:e.fullMoveCount}}},292:e=>{e.exports=require("fs/promises")},282:e=>{e.exports=require("process")}},I={};function o(e){var t=I[e];if(void 0!==t)return t.exports;var N=I[e]={exports:{}};return i[e](N,N.exports,o),N.exports}e="function"==typeof Symbol?Symbol("webpack then"):"__webpack_then__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",N=e=>{e&&(e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},a=e=>!--e.r&&e(),s=(e,t)=>e?e.push(t):a(t),o.a=(i,I,o)=>{var r,K,O,n=o&&[],c=i.exports,P=!0,l=!1,E=(t,N,a)=>{l||(l=!0,N.r+=t.length,t.map(((t,s)=>t[e](N,a))),l=!1)},G=new Promise(((e,t)=>{O=t,K=()=>(e(c),N(n),n=0)}));G[t]=c,G[e]=(e,t)=>{if(P)return a(e);r&&E(r,e,t),s(n,e),G.catch(t)},i.exports=G,I((i=>{if(!i)return K();var I,o;r=(i=>i.map((i=>{if(null!==i&&"object"==typeof i){if(i[e])return i;if(i.then){var I=[];i.then((e=>{o[t]=e,N(I),I=0}));var o={};return o[e]=(e,t)=>(s(I,e),i.catch(t)),o}}var r={};return r[e]=e=>a(e),r[t]=i,r})))(i);var O=new Promise(((e,N)=>{(I=()=>e(o=r.map((e=>e[t])))).r=0,E(r,I,N)}));return I.r?O:o})).then(K,O),P=!1},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var N in t)o.o(t,N)&&!o.o(e,N)&&Object.defineProperty(e,N,{enumerable:!0,get:t[N]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o(581)})();
