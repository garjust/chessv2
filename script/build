#!/bin/bash

OUT_DIR=build

rm -rf ${OUT_DIR}
mkdir -p ${OUT_DIR}

yarn esbuild src/script/perft.ts \
  --bundle \
  --platform=node \
  --format=esm \
  --minify \
  --outfile=${OUT_DIR}/perft.mjs "$@"
  # --analyze

yarn esbuild src/script/engine.ts \
  --bundle \
  --platform=node \
  --format=esm \
  --define:USE_NODE_WORKER_THREAD=true \
  --outfile=${OUT_DIR}/engine.mjs "$@"

# Build the chess web app
# vite build
